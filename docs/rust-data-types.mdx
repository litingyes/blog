---
title: Rust æ•°æ®ç±»å‹
description: ç†Ÿç»ƒæŒæ¡ Rust çš„æ•°æ®ç±»å‹æ˜¯å†™å¥½ Rust çš„åŸºç¡€
publishTime: 2024-07-18
lastUpdatedTime: 2024-07-18
tags: 
  - rust
---

## Rust æ•°æ®ç±»å‹

### æ ‡é‡ç±»å‹

**æ ‡é‡ï¼ˆscalarï¼‰** ç±»å‹ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚Rust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹

#### æ•´æ•°ç±»å‹

| é•¿åº¦ | æœ‰ç¬¦å·ç±»å‹ | æ— ç¬¦å·ç±»å‹ |
| :-: | :-: | :-: |
| 8ä½ | i8 | u8 |
| 16ä½ |  i16  | u16 |
| 32ä½ | i32 | u32 |
| 64ä½ | i64 | u64 |
| 128ä½ |i128 | u128 |
| è§†æ¶æ„è€Œå®š |isize | usize |

`i` æ˜¯è‹±æ–‡å•è¯ `integer` çš„é¦–å­—æ¯ï¼Œä¸ä¹‹ç›¸åçš„æ˜¯ `u`ï¼Œä»£è¡¨æ— ç¬¦å· `unsigned` ç±»å‹ï¼ŒRust æ•´å‹é»˜è®¤ä½¿ç”¨çš„æ˜¯ `i32`

`isize` å’Œ `usize` ç±»å‹å–å†³äºç¨‹åºè¿è¡Œçš„è®¡ç®—æœº CPU ç±»å‹ï¼š è‹¥ CPU æ˜¯ 32 ä½çš„ï¼Œåˆ™è¿™ä¸¤ä¸ªç±»å‹æ˜¯ 32 ä½çš„ï¼ŒåŒç†ï¼Œè‹¥ CPU æ˜¯ 64 ä½ï¼Œé‚£ä¹ˆå®ƒä»¬åˆ™æ˜¯ 64 ä½ï¼Œå…¶ä¸»è¦åº”ç”¨åœºæ™¯æ˜¯ç”¨ä½œé›†åˆçš„ç´¢å¼•

::: info æ•´å‹æº¢å‡º

æ¯”å¦‚è¯´æœ‰ä¸€ä¸ª `u8`ï¼Œå®ƒå¯ä»¥å­˜æ”¾ä» `0 -> 255` çš„å€¼ï¼Œå¦‚æœä½ èµ‹å€¼ `256` å°±ä¼šå‘ç”Ÿ **æ•´å‹æº¢å‡º**(integer overflow)

- å½“åœ¨ `debug` æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust æ£€æŸ¥è¿™ç±»é—®é¢˜å¹¶ä½¿ç¨‹åº `panic`ï¼ˆç¨‹åºå› é”™è¯¯è€Œé€€å‡ºï¼‰
- ä½¿ç”¨ `--release` flag åœ¨ release æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust ä¸ä¼šæ£€æµ‹å‡ºå¯¼è‡´ `panic` çš„æ•´å‹æº¢å‡ºã€‚ä¸æ­¤ç›¸åï¼ŒRust ä¼šè¿›è¡Œä¸€ç§è¢«ç§°ä¸º **äºŒè¿›åˆ¶è¡¥ç **(two's complement wrapping) çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ¯”æ­¤ç±»å‹èƒ½å®¹çº³æœ€å¤§å€¼è¿˜å¤§çš„å€¼ä¼šå›ç»•åˆ°æœ€å°å€¼ï¼Œå¦‚ å€¼ `256` å˜æˆ `0`ï¼Œå€¼ `257` å˜æˆ `1`

è€Œä¸ºäº†æ˜¾å¼åœ°å¤„ç†æº¢å‡ºçš„å¯èƒ½æ€§ï¼Œå¯ä»¥ä½¿ç”¨è¿™å‡ ç±»æ ‡å‡†åº“æä¾›çš„åŸå§‹æ•°å­—ç±»å‹æ–¹æ³•ï¼š

- æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ `wrapping_*` æ–¹æ³•è¿›è¡Œ wrappingï¼Œå¦‚ `wrapping_add`
- å¦‚æœ `checked_*` æ–¹æ³•å‡ºç°æº¢å‡ºï¼Œåˆ™è¿”å› `None` å€¼
- ç”¨ `overflowing_*` æ–¹æ³•è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å‡ºç°æº¢å‡º
- ç”¨ `saturating_*` æ–¹æ³•åœ¨å€¼çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼å¤„è¿›è¡Œé¥±å’Œå¤„ç†

:::

#### æµ®ç‚¹å‹

Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ `f32`ï¼ˆå•ç²¾åº¦æµ®ç‚¹æ•°ï¼‰ å’Œ `f64`ï¼ˆåŒç²¾åº¦æµ®ç‚¹æ•°ï¼‰ï¼Œåˆ†åˆ«å  32 ä½ å’Œ 64 ä½ï¼Œé»˜è®¤ç±»å‹ä¸º `f64`ï¼ˆåœ¨ç°ä»£ **CPU** ä¸­`f64`ï¼Œ`f64` ä¸ `f32` çš„é€Ÿåº¦å‡ ä¹ä¸€æ ·ï¼Œä¸è¿‡ç²¾åº¦æ›´é«˜ï¼‰

```rust
fn main() {
  let x = 2.0; // f64

  let y: f32 = 3.0; // f32
}
```

#### å¸ƒå°”å€¼

Rust ä¸­çš„å¸ƒå°”å€¼ç”¨ `bool` è¡¨ç¤ºï¼Œæœ‰ä¸¤ä¸ªå€¼ï¼š`true` & `false`

```rust
fn main() {
  let t = true;

  let f: bool = false;
}
```

#### å­—ç¬¦ç±»å‹

Rust çš„ `char` ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ï¼ˆç”¨å•å¼•å·å£°æ˜ `char` å­—é¢é‡ï¼Œç”¨åŒå¼•å·å£°æ˜ **å­—ç¬¦ä¸²å­—é¢é‡**ï¼‰

```rust
fn main() {
  let c = 'z';
  let z: char = 'â„¤';
  let heart_eyed_cat = 'ğŸ˜»';
}
```

### å¤åˆç±»å‹

**å¤åˆç±»å‹ï¼ˆCompound typesï¼‰** å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹

#### å…ƒç¥–ç±»å‹

å…ƒç»„æ˜¯ä¸€ä¸ªå°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚**å…ƒç»„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°**

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

#### æ•°ç»„ç±»å‹

ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚Rust ä¸­çš„æ•°ç»„ä¸ä¸€äº›å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼ŒRust ä¸­çš„æ•°ç»„é•¿åº¦æ˜¯ **å›ºå®š** çš„

```rust
fn main() {
  // å£°æ˜æ•°ç»„
  let a: [i32; 5] = [1, 2, 3, 4, 5];
  // or
  let a = [3; 5];
}
```

### å‚è€ƒå†…å®¹

- [Rustç¨‹åºè®¾è®¡è¯­è¨€ > æ•°æ®ç±»å‹](https://kaisery.github.io/trpl-zh-cn/ch03-02-data-types.html)
